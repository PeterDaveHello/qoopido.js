/*!
* Qoopido.js library v3.3.2, 2014-5-24
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e,t){t.register?t.register("polyfill/object/defineproperty",e):(t.modules=t.modules||{})["polyfill/object/defineproperty"]=e()}(function(){"use strict";if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty,t=Object.prototype.__defineGetter__,n=Object.prototype.__defineSetter__;Object.defineProperty=function(r,o,i){if(e)try{return e(r,o,i)}catch(l){}if(r!==Object(r))throw new TypeError("Object.defineProperty called on non-object");return t&&"get"in i&&t.call(r,o,i.get),n&&"set"in i&&n.call(r,o,i.set),"value"in i&&(r[o]=i.value),r}}return!0},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var n=[];Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||n.push("./defineproperty"),t.register("polyfill/object/defineproperties",e,n)}else(t.modules=t.modules||{})["polyfill/object/defineproperties"]=e()}(function(){"use strict";return Object.defineProperties||(Object.defineProperties=function(e,t){if(e!==Object(e))throw new TypeError("Object.defineProperties called on non-object");var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n]);return e}),!0},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var n=[];Object.defineProperties||n.push("./defineproperties"),t.register("polyfill/object/create",e,n)}else(t.modules=t.modules||{})["polyfill/object/create"]=e()}(function(){"use strict";return Object.create||(Object.create=function(e,t){function n(){}if("object"!=typeof e)throw new TypeError;n.prototype=e;var r=new n;if(e&&(r.constructor=n),arguments.length>1){if(t!==Object(t))throw new TypeError;Object.defineProperties(r,t)}return r}),!0},window.qoopido=window.qoopido||{}),function(e,t){t.register?t.register("polyfill/object/getownpropertydescriptor",e):(t.modules=t.modules||{})["polyfill/object/getownpropertydescriptor"]=e()}(function(){"use strict";if(!Object.getOwnPropertyDescriptor||!function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()){var e=Object.getOwnPropertyDescriptor;Object.getOwnPropertyDescriptor=function(t,n){if(t!==Object(t))throw new TypeError;try{return e.call(Object,t,n)}catch(r){}return Object.prototype.hasOwnProperty.call(t,n)?{value:t[n],enumerable:!0,writable:!0,configurable:!0}:void 0}}return!0},window.qoopido=window.qoopido||{}),function(e,t,n,r,o,i){"use strict";function l(e){for(var t;(t=e.replace(d,""))!==e;)e=t;return e.replace(y,"")}var s,u,a=t.shared=t.shared||{},c=t.modules=t.modules||{},p=[],f=new RegExp("^\\.+\\/"),d=new RegExp("(?:\\/|)[^\\/]*\\/\\.\\."),y=new RegExp("(^\\/)|\\.\\/","g");s=t.register=function(e,t,s,u){var p,d=e.split("/");return c[e]?c[e]:(p=function(){if(s){var p,y,m,h=d.slice(0,-1).join("/");for(p=0;(y=s[p])!==i;p++)m=f.test(y),m&&(y=l(h+"/"+y)),!c[y]&&arguments[p]&&(c[y]=arguments[p]),m&&!c[y]&&"undefined"!=typeof console&&console.error("".concat("[Qoopido.js] ",e,": Could not load dependency ",y))}return c[e]=t(c,a,d,n,r,o,i),u&&u(c[e]),c[e]},"function"==typeof define&&define.amd?s?define(s,p):define(p):p(),void 0)},u=t.registerSingleton=function(e,t,n){s(e,t,n,function(t){c[e]=t.create()})},Object.create||p.push("./polyfill/object/create"),Object.getOwnPropertyNames||p.push("./polyfill/object/getownpropertynames"),Object.getOwnPropertyDescriptor&&function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()||p.push("./polyfill/object/getownpropertydescriptor"),s("base",e,p)}(function(e,t,n,r,o,i,l){"use strict";function s(e){var t,n,r={},o=Object.getOwnPropertyNames(e);for(t=0;(n=o[t])!==l;t++)r[n]=Object.getOwnPropertyDescriptor(e,n);return r}function u(){"undefined"!=typeof console&&console.error("[Qoopido.js] Operation prohibited on an actual instance")}return{create:function(){var e,t=Object.create(this,s(this));return t._constructor&&(e=t._constructor.apply(t,arguments)),t.create=t.extend=u,e||t},extend:function(e){return e=e||{},e._parent=this,Object.create(this,s(e))}}},window.qoopido=window.qoopido||{},navigator,window,document),function(e){window.qoopido.register("emitter",e,["./base"])}(function(e,t,n,r,o,i,l){"use strict";function s(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);return e._mapped[t]=e[t],function(){var r,o=Array.prototype.slice.call(arguments);return e.emit.apply(e,["pre"+n,o]),r=e._mapped[t].apply(e,o),e.emit.apply(e,["post"+n,o,r]),r}}var u=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.base.extend({_mapped:null,_listener:{},_constructor:function(){var e,t=this;t._mapped={};for(e in t)"function"==typeof t[e]&&u.test(e)===!1&&(t[e]=s(t,e))},on:function(e,t){var n,r,o=this;for(e=e.split(" "),n=0;(r=e[n])!==l;n++)(o._listener[r]=o._listener[r]||[]).push(t);return o},one:function(e,t,n){n=n!==!1;var r=this;return r.on(e,function o(i){r.off(n===!0?i:e,o),t.apply(this,arguments)}),r},off:function(e,t){var n,r,o,i,s=this;if(e)for(e=e.split(" "),n=0;(r=e[n])!==l;n++)if(s._listener[r]=s._listener[r]||[],t)for(o=0;(i=s._listener[r][o])!==l;o++)i===t&&(s._listener[r].splice(o,1),o--);else s._listener[r].length=0;else for(r in s._listener)s._listener[r].length=0;return s},emit:function(e){var t,n,r=this;if(e!==l)for(r._listener[e]=r._listener[e]||[],t=0;(n=r._listener[e][t])!==l;t++)n.apply(r,arguments);return r}})}),function(e){window.qoopido.register("function/unique/uuid",e)}(function(){"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(n,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}var t={},n=new RegExp("[xy]","g");return function(){var n;do n=e();while("undefined"!=typeof t[n]);return t[n]=!0,n}}),function(e){window.qoopido.register("proxy",e,["./base","./function/unique/uuid"])}(function(e){"use strict";return e.base.extend({_constructor:function(t,n){var r=Array.prototype.splice.call(arguments,2),o=function(){return n.apply(t,Array.prototype.slice.call(arguments,0).concat(r))};return o._quid=e["function/unique/uuid"](),o}})}),function(e){window.qoopido.register("polyfill/window/getcomputedstyle",e)}(function(e,t,n,r,o){"use strict";if(!o.getComputedStyle){var i=new RegExp("(\\-([a-z]){1})","g"),l=function(){return arguments[2].toUpperCase()};o.getComputedStyle=function(e){var t=this;return t.element=e,t.getPropertyValue=function(t){return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,l)),e.currentStyle[t]?e.currentStyle[t]:null},t}}return!0}),function(e){var t=["../proxy"];window.getComputedStyle||t.push("../polyfill/window/getcomputedstyle"),window.qoopido.register("dom/element",e,t)}(function(e,t,n,r,o,i,l){"use strict";function s(e){return e.target||(e.target=e.srcElement||i),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e}var u,a,c,p="object",f="string";return u=o.addEventListener?function(e,t){var n=this,r=n.element,o="".concat("listener[",e,"][",t._quid||t,"]");r[o]=function(e){t.call(this,s(e))},r.addEventListener(e,r[o],!1)}:function(e,t){var n,r=this,i=r.element;i["on"+e]!==l?(n="".concat("listener[",e,"][",t._quid||t,"]"),i[n]=function(){t.call(this,s(o.event))},i.attachEvent("on"+e,i[n])):(e="".concat("fake[",e,"]"),i[e]=null,i.attachEvent("onpropertychange",function(n){n.propertyName===e&&t.call(this,s(i[e]))}))},a=o.removeEventListener?function(e,t){var n=this,r=n.element,o="".concat("listener[",e,"][",t._quid||t,"]");r.removeEventListener(e,r[o],!1),delete r[o]}:function(e,t){var n=this,r=n.element,o="".concat("listener[",e,"][",t._quid||t,"]");r.detachEvent("on"+e,r[o]),delete r[o]},c=i.createEvent?function(e,t){var n=this,r=n.element,o=i.createEvent("HTMLEvents");o.initEvent(e,!0,!0),o.data=t,r.dispatchEvent(o)}:function(e,t){var n=this,r=n.element,o=i.createEventObject();o.type=o.eventType=e,o.data=t;try{r.fireEvent("on"+o.eventType,o)}catch(s){var u="".concat("fake[",e,"]");r[u]!==l&&(r[u]=o)}},e.base.extend({type:null,element:null,listener:null,_constructor:function(e){var t=this;if(!e)throw new Error("Missing element argument");t.type=e.tagName,t.element=e,t.listener={}},getAttribute:function(e){if(e&&typeof e===f){var t=this;return e=e.split(" "),1===e.length?t.element.getAttribute(e[0]):t.getAttributes(e)}},getAttributes:function(e){var t=this,n={};if(e&&(e=typeof e===f?e.split(" "):e,typeof e===p&&e.length)){var r,o;for(r=0;(o=e[r])!==l;r++)n[o]=t.element.getAttributes(o)}return n},setAttribute:function(e,t){var n=this;return e&&typeof e===f&&n.element.setAttribute(e,t),n},setAttributes:function(e){var t=this;if(e&&typeof e===p&&!e.length){var n;for(n in e)t.element.setAttribute(n,e[n])}return t},removeAttribute:function(e){var t=this;return e&&typeof e===f&&(e=e.split(" "),1===e.length?t.element.removeAttribute(e[0]):t.removeAttributes(e)),t},removeAttributes:function(e){var t=this;if(e&&(e=typeof e===f?e.split(" "):e,typeof e===p&&e.length)){var n,r;for(n=0;(r=e[n])!==l;n++)t.element.removeAttribute(r)}return t},getStyle:function(e){if(e&&typeof e===f){var t=this;return e=e.split(" "),1===e.length?o.getComputedStyle(t.element,null).getPropertyValue(e[0]):t.getStyles(e)}},getStyles:function(e){var t=this,n={};if(e&&(e=typeof e===f?e.split(" "):e,typeof e===p&&e.length)){var r,i;for(r=0;(i=e[r])!==l;r++)n[i]=o.getComputedStyle(t.element,null).getPropertyValue(i)}return n},setStyle:function(e,t){var n=this;return e&&typeof e===f&&(n.element.style[e]=t),n},setStyles:function(e){var t=this;if(e&&typeof e===p&&!e.length){var n;for(n in e)t.element.style[n]=e[n]}return t},isVisible:function(){var e=this.element;return!(e.offsetWidth<=0&&e.offsetHeight<=0)},hasClass:function(e){return new RegExp("(?:^|\\s)"+e+"(?:\\s|$)").test(this.element.className)},addClass:function(e){var t,n=this;return n.hasClass(e)||(t=n.element.className.split(" "),t.push(e),n.element.className=t.join(" ")),n},removeClass:function(e){var t=this;return t.hasClass(e)&&(t.element.className=t.element.className.replace(new RegExp("(?:^|\\s)"+e+"(?!\\S)"),"")),t},toggleClass:function(e){var t=this;return t.hasClass(e)?t.removeClass(e):t.addClass(e),t},prepend:function(e){var t=this,n=t.element;return e=e.element||e,n.firstChild?n.insertBefore(e,n.firstChild):t.append(e),t},append:function(e){var t=this;return t.element.appendChild(e.element||e),t},replaceWith:function(e){var t=this,n=t.element;return e=e.element||e,n.parentNode.replaceChild(e,n),t},prependTo:function(e){var t=this,n=t.element;return(e=e.element||e).firstChild?e.insertBefore(n,e.firstChild):t.appendTo(e),t},appendTo:function(e){var t=this;return(e.element||e).appendChild(t.element),t},insertBefore:function(e){var t=this,n=t.element;return(e=e.element||e).parentNode.insertBefore(n,e),t},insertAfter:function(e){var t=this,n=t.element;return(e=e.element||e).nextSibling?e.parentNode.insertBefore(n,e.nextSibling):t.appendTo(e.parentNode),t},replace:function(e){var t=this,n=t.element;return(e=e.element||e).parentNode.replaceChild(n,e),t},remove:function(){var e=this,t=e.element;return t.parentNode.removeChild(t),e},on:function(e,t){var n,r,o=this;for(e=e.split(" "),n=0;(r=e[n])!==l;n++)(o.listener[r]=o.listener[r]||[]).push(t),u.call(o,r,t);return o},one:function(t,n,r){r=r!==!1;var o=this,i=e.proxy.create(o,function(e){o.off(r===!0?e.type:t,i),n.call(o,e)});return o.on(t,i),o},off:function(e,t){var n,r,o,i,s=this;if(e)for(e=e.split(" "),n=0;(r=e[n])!==l;n++)if(s.listener[r]=s.listener[r]||[],t)for(o=0;(i=s.listener[r][o])!==l;o++)i===t&&(s.listener[r].splice(o,1),a.call(s,r,i),o--);else for(;s.listener[r].length>0;)a.call(s,r,s.listener[r].pop());else for(r in s.listener)for(;s.listener[r].length>0;)a.call(s,r,s.listener[r].pop());return s},emit:function(e,t){var n=this;return c.call(n,e,t),n}})}),function(e){window.qoopido.registerSingleton("component/remux",e,["../emitter","../dom/element"])}(function(e,t,n,r,o,i){"use strict";function l(e,t){var n=this;return p.fontsize=e||parseInt(o.getComputedStyle(a).getPropertyValue("font-size"),10),p.layout=t||o.getComputedStyle(a,":after").getPropertyValue("content")||null,null!==p.layout&&(p.layout=p.layout.replace(y,"")),null===p.layout||p.fontsize===f.fontsize&&p.layout===f.layout||(f.fontsize=p.fontsize,f.layout=p.layout,p.ratio.device=o.devicePixelRatio||1,p.ratio.fontsize=p.fontsize/c,p.ratio.total=p.ratio.device*p.ratio.fontsize,n.emit("statechange",p)),n}var s,u,a=i.getElementsByTagName("html")[0],c=16,p={fontsize:null,layout:null,ratio:{}},f={fontsize:null,layout:null},d=null,y=new RegExp("[\"']","g");return s=e.emitter.extend({_constructor:function(){var t=this,n=parseInt(a.getAttribute("data-base"),10),r=function(){null!==d&&o.clearTimeout(d),d=o.setTimeout(function(){l.call(t)},20)};s._parent._constructor.call(t),isNaN(n)===!1&&(c=n),u=i.createElement("style"),u.type="text/css","undefined"!=typeof u.sheet&&u.appendChild(i.createTextNode("")),i.getElementsByTagName("head")[0].appendChild(u),e["dom/element"].create(o).on("resize orientationchange",r),l.call(t)},getState:function(){return p},getLayout:function(){return p.layout},forceLayout:function(e,t){var n=this;return l.call(n,e,t),n},addLayout:function(e,t){var n,r,o,s,a,p,f=this;arguments.length>1?(n={},n[e]=t):n=arguments[0];for(r in n)for(o=n[r],s=o.min;s<=o.max;s++)a=Math.round(o.width*(s/c)),p="@media screen and (min-width: "+a+"px) { html { font-size: "+s+'px; } html:after { content: "'+r+'"; display: none; } }',u.styleSheet&&u.styleSheet.insertRule?u.styleSheet.insertRule(p,u.styleSheet.cssRules.length):u.sheet&&u.appendChild(i.createTextNode(p));return l.call(f),f}})});