/*!
* Qoopido.js library v3.4.5, 2014-7-14
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e,t){t.register?t.register("polyfill/object/defineproperty",e):(t.modules=t.modules||{})["polyfill/object/defineproperty"]=e()}(function(){"use strict";if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty,t=Object.prototype.__defineGetter__,n=Object.prototype.__defineSetter__;Object.defineProperty=function(r,o,i){if(e)try{return e(r,o,i)}catch(c){}if(r!==Object(r))throw new TypeError("Object.defineProperty called on non-object");return t&&"get"in i&&t.call(r,o,i.get),n&&"set"in i&&n.call(r,o,i.set),"value"in i&&(r[o]=i.value),r}}return Object.defineProperty},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var n=[];Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||n.push("./defineproperty"),t.register("polyfill/object/defineproperties",e,n)}else(t.modules=t.modules||{})["polyfill/object/defineproperties"]=e()}(function(){"use strict";return Object.defineProperties||(Object.defineProperties=function(e,t){if(e!==Object(e))throw new TypeError("Object.defineProperties called on non-object");var n;for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object.defineProperty(e,n,t[n]);return e}),Object.defineProperties},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var n=[];Object.defineProperties||n.push("./defineproperties"),t.register("polyfill/object/create",e,n)}else(t.modules=t.modules||{})["polyfill/object/create"]=e()}(function(){"use strict";return Object.create||(Object.create=function(e,t){function n(){}if("object"!=typeof e)throw new TypeError;n.prototype=e;var r=new n;if(e&&(r.constructor=n),arguments.length>1){if(t!==Object(t))throw new TypeError;Object.defineProperties(r,t)}return r}),Object.create},window.qoopido=window.qoopido||{}),function(e,t){t.register?t.register("polyfill/object/getownpropertynames",e):(t.modules=t.modules||{})["polyfill/object/getownpropertynames"]=e()}(function(){"use strict";return Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),Object.getOwnPropertyNames},window.qoopido=window.qoopido||{}),function(e,t){t.register?t.register("polyfill/object/getownpropertydescriptor",e):(t.modules=t.modules||{})["polyfill/object/getownpropertydescriptor"]=e()}(function(){"use strict";if(!Object.getOwnPropertyDescriptor||!function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()){var e=Object.getOwnPropertyDescriptor;Object.getOwnPropertyDescriptor=function(t,n){if(t!==Object(t))throw new TypeError;try{return e.call(Object,t,n)}catch(r){}return Object.prototype.hasOwnProperty.call(t,n)?{value:t[n],enumerable:!0,writable:!0,configurable:!0}:void 0}}return Object.getOwnPropertyDescriptor},window.qoopido=window.qoopido||{}),function(e,t,n,r,o,i){"use strict";function c(e){for(var t;(t=e.replace(m,""))!==e;)e=t;return e.replace(y,"")}var s,a,l=t.qoopido||(t.qoopido={}),u=l.shared||(l.shared={}),p=l.modules||(l.modules={}),d=[],f=new RegExp("^\\.+\\/"),m=new RegExp("(?:\\/|)[^\\/]*\\/\\.\\."),y=new RegExp("(^\\/)|\\.\\/","g");s=l.register=function(e,t,s,a){var l,d=e.split("/");return p[e]?p[e]:(l=function(){if(s)for(var l,m,y=d.slice(0,-1).join("/"),h=0;(l=s[h])!==i;h++)m=f.test(l),m&&(l=c(y+"/"+l)),!p[l]&&arguments[h]&&(p[l]=arguments[h]),m&&!p[l]&&"undefined"!=typeof console&&console.error("".concat("[Qoopido.js] ",e,": Could not load dependency ",l));return p[e]=t(p,u,d,n,r,o,i),a&&a(p[e]),p[e]},void("undefined"!=typeof module&&module.exports?module.exports=define(l):"function"==typeof define&&define.amd?s?define(s,l):define(l):l()))},a=l.registerSingleton=function(e,t,n){s(e,t,n,function(t){p[e]=t.create()})},Object.create||d.push("./polyfill/object/create"),Object.getOwnPropertyNames||d.push("./polyfill/object/getownpropertynames"),Object.getOwnPropertyDescriptor&&function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()||d.push("./polyfill/object/getownpropertydescriptor"),s("base",e,d)}(function(e,t,n,r,o,i,c){"use strict";function s(e){for(var t,n={},r=Object.getOwnPropertyNames(e),o=0;(t=r[o])!==c;o++)n[t]=Object.getOwnPropertyDescriptor(e,t);return n}function a(){"undefined"!=typeof console&&console.error("[Qoopido.js] Operation prohibited on an actual instance")}return{create:function(){var e,t=Object.create(this,s(this));return t._constructor&&(e=t._constructor.apply(t,arguments)),t.create=t.extend=a,e||t},extend:function(e){return e=e||{},e._parent=this,Object.create(this,s(e))}}},this,navigator,window,document),function(e){window.qoopido.register("polyfill/window/getcomputedstyle",e)}(function(e,t,n,r,o){"use strict";if(o.getComputedStyle)return o.getComputedStyle;var i=new RegExp("(\\-([a-z]){1})","g"),c=function(){return arguments[2].toUpperCase()};return function(e){var t=this;return t.getPropertyValue=function(t){return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,c)),e.currentStyle[t]||null},t}}),function(e){var t=[];window.getComputedStyle||t.push("polyfill/window/getcomputedstyle"),Array.prototype.indexOf||t.push("../array/indexof"),window.qoopido.register("polyfill/window/matchmedia",e,t)}(function(e,t,n,r,o,i,c){"use strict";function s(){var e=o.innerWidth||y.clientWidth,t=o.innerHeight||y.clientHeight,n=o.screen.width,r=o.screen.height,i=o.screen.colorDepth,c=o.devicePixelRatio;g.width=e,g.height=t,g["aspect-ratio"]=(e/t).toFixed(2),g.color=i,g["color-index"]=Math.pow(2,i),g["device-aspect-ratio"]=(n/r).toFixed(2),g["device-height"]=r,g["device-width"]=n,g["device-pixel-ratio"]=c||1,g.resolution=c&&96*c||o.screen.deviceXDPI||96,g.orientation=t>=e?"portrait":"landscape"}function a(e){var t,n,r={matches:!1,media:e,addListener:function(e){e&&n.push(e)},removeListener:function(e){for(var t,r=0;(t=n[r])!==c;r++)t===e&&n.splice(r,1)}};return r.matches=""===e?!0:l(e),h.push({mql:r,listeners:[]}),t=h.length-1,w[e]=t,n=h[t].listeners,r}function l(e){var t=-1!==e.indexOf(",")&&e.split(",")||[e],n=t.length-1,r=n,o=null,i=null,c="",s=0,a=!1,l="",u="",p=null,d=0,f=0,m=null,y="",h="",w="",O="",j="",v=!1;if(""===e)return!0;do if(o=t[r-n],a=!1,i=o.match(b.type),i&&(c=i[0],s=i.index),!i||-1===o.substring(0,s).indexOf("(")&&(s||!i[3]&&c!==i.input))v=!1;else{if(u=o,a="not"===i[1],s||(l=i[2],u=o.substring(c.length)),v=l===g.type||"all"===l||""===l,p=-1!==u.indexOf(" and ")&&u.split(" and ")||[u],d=p.length-1,f=d,v&&d>=0&&""!==u)do{if(m=p[d].match(b.media),!m||!g[m[3]]){v=!1;break}if(y=m[2],h=m[5],O=h,w=m[7],j=g[m[3]],w&&(O="px"===w?Number(h):"em"===w||"rem"===w?16*h:m[8]?(h/m[8]).toFixed(2):"dppx"===w?96*h:"dpcm"===w?.3937*h:Number(h)),v="min-"===y&&O?j>=O:"max-"===y&&O?O>=j:O?j===O:!!j,!v)break}while(d--);if(v)break}while(n--);return a?!v:v}function u(){var e,t,n=!1,r=0,i=0;if(h.length>0)for(s();(e=h[r])!==c;r++)if(n=l(e.mql.media),(n&&!e.mql.matches||!n&&e.mql.matches)&&(e.mql.matches=n,e.listeners))for(;(t=e.listeners[i])!==c;i++)t.call(o,e.mql)}function p(){o.clearTimeout(f),f=o.setTimeout(u,10)}function d(){var t,n=i.getElementsByTagName("head")[0],r=i.createElement("style"),s=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],a="#"+m+" { position: relative; z-index: 0; }",l="",u=o.addEventListener||(l="on")&&o.attachEvent,d=0;for(r.type="text/css",r.id=m,n.appendChild(r);(t=s[d])!==c;d++)a+="@media "+t+" { #"+m+" { position: relative; z-index: "+d+" } }";r.styleSheet?r.styleSheet.cssText=a:r.textContent=a,g.type=s[1*(o.getComputedStyle||e["polyfill/window/getcomputedstyle"])(r).zIndex||0],n.removeChild(r),u(l+"resize",p),u(l+"orientationchange",p)}var f,m="qoopidoPolyfillWindowMatchmedia",y=i.documentElement,h=[],w={},g={},b={type:/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,media:/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/};return o.matchMedia||(d(),s(),o.matchMedia=function(e){var t=w[e]||!1;return t===!1?a(e):h[t].mql}),o.matchMedia}),function(e){window.qoopido.register("emitter",e,["./base"])}(function(e,t,n,r,o,i,c){"use strict";function s(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);return e._mapped[t]=e[t],function(){var r,o=Array.prototype.slice.call(arguments);return e.emit.apply(e,["pre"+n,o]),r=e._mapped[t].apply(e,o),e.emit.apply(e,["post"+n,o,r]),r}}var a=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.base.extend({_mapped:null,_listener:null,_temp:null,_constructor:function(){var e,t=this;t._mapped={},t._listener={};for(e in t)"function"==typeof t[e]&&a.test(e)===!1&&(t[e]=s(t,e))},on:function(e,t){var n,r=this,o=0;for(e=e.split(" ");(n=e[o])!==c;o++)(r._listener[n]=r._listener[n]||[]).push(t);return r},one:function(e,t,n){n=n!==!1;var r=this;return r.on(e,function o(i){r.off(n===!0?i:e,o),t.apply(this,arguments)}),r},off:function(e,t){var n,r,o,i=this,s=0;if(e)for(e=e.split(" ");(n=e[s])!==c;s++)if(i._listener[n]=i._listener[n]||[],t)for(r=0;(o=i._listener[n][r])!==c;r++)o===t&&(i._listener[n].splice(r,1),r--);else i._listener[n].length=0;else for(n in i._listener)i._listener[n].length=0;return i},emit:function(e){var t,n=this,r=0;if(e!==c){for(n._listener[e]=n._listener[e]||[],n._temp=n._listener[e].slice();(t=n._temp[r])!==c;r++)t.apply(n,arguments);n._temp.length=0}return n}})}),function(e){var t=["../emitter"];window.matchMedia||t.push("../polyfill/window/matchmedia"),window.qoopido.register("component/sense",e,t)}(function(e,t,n,r,o){"use strict";function i(e){var t=this;t.emit(e.matches===!0?"matched":"dematched")}var c,s={};return c=e.emitter.extend({_constructor:function(e){var t=this;c._parent._constructor.call(t),(s[e]||(s[e]=o.matchMedia(e))).addListener(function(e){i.call(t,e)}),o.setTimeout(function(){i.call(t,s[e])},0)}})}),function(e){window.qoopido.registerSingleton("component/remux",e,["../emitter","./sense"])}(function(e,t,n,r,o,i){"use strict";function c(e,t){var n=this;return e&&t&&(l.className=e,l.style.fontSize=t+"px",p.layout=e,p.fontsize=t,(d.fontsize!==p.fontsize||d.layout!==p.layout)&&(p.ratio.device=o.devicePixelRatio||1,p.ratio.fontsize=p.fontsize/u,p.ratio.total=p.ratio.device*p.ratio.fontsize,d.layout!==p.layout&&n.emit("layoutchanged",p),d.fontsize!==p.fontsize&&n.emit("fontsizechanged",p),n.emit("statechanged",p),d.fontsize=p.fontsize,d.layout=p.layout)),n}function s(t,n,r){var i=this;o.setTimeout(function(){e["component/sense"].create(t).on("matched",function(){c.call(i,n,r)})},0)}var a,l=i.getElementsByTagName("html")[0],u=16,p={fontsize:null,layout:null,ratio:{}},d={fontsize:null,layout:null};return a=e.emitter.extend({_constructor:function(){var e=this,t=parseInt(l.getAttribute("data-base"),10);a._parent._constructor.call(e),isNaN(t)===!1&&(u=t)},getState:function(){return p},getLayout:function(){return p.layout},getFontsize:function(){return p.fontsize},setLayout:function(e,t){var n=this;return c.call(n,e,t),n},addLayout:function(e,t){var n,r,o,i,c,a,l,p,d=this;arguments.length>1?(n={},n[e]=t):n=arguments[0];for(r in n)for(o=n[r],i=o.min;i<=o.max;i++)l=Math.round(o.width*(i/u)),p=Math.round(o.width*((i+1)/u))-1,s.call(d,"screen and (min-width: "+l+"px) and (max-width: "+p+"px )",r,i),c=!c||l<c.width?{width:l,fontsize:i,layout:r}:c,a=!a||p>=a.width?{width:p,fontsize:i,layout:r}:a;return s.call(d,"screen and (max-width: "+(c.width-1)+"px)",c.layout,c.fontsize),s.call(d,"screen and (min-width: "+(a.width+1)+"px)",a.layout,a.fontsize),d}})});