/*!
* Qoopido.js library v3.6.1, 2015-2-5
* https://github.com/dlueth/qoopido.js
* (c) 2015 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(e,t){t.register?t.register("polyfill/object/defineproperty",e):(t.modules=t.modules||{})["polyfill/object/defineproperty"]=e()}(function(){"use strict";if(!Object.defineProperty||!function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()){var e=Object.defineProperty,t=Object.prototype.__defineGetter__,r=Object.prototype.__defineSetter__;Object.defineProperty=function(n,o,i){if(e)try{return e(n,o,i)}catch(c){}if(n!==Object(n))throw new TypeError("Object.defineProperty called on non-object");return t&&"get"in i&&t.call(n,o,i.get),r&&"set"in i&&r.call(n,o,i.set),"value"in i&&(n[o]=i.value),n}}return Object.defineProperty},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var r=[];Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||r.push("./defineproperty"),t.register("polyfill/object/defineproperties",e,r)}else(t.modules=t.modules||{})["polyfill/object/defineproperties"]=e()}(function(){"use strict";return Object.defineProperties||(Object.defineProperties=function(e,t){if(e!==Object(e))throw new TypeError("Object.defineProperties called on non-object");var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&Object.defineProperty(e,r,t[r]);return e}),Object.defineProperties},window.qoopido=window.qoopido||{}),function(e,t){if(t.register){var r=[];Object.defineProperties||r.push("./defineproperties"),t.register("polyfill/object/create",e,r)}else(t.modules=t.modules||{})["polyfill/object/create"]=e()}(function(){"use strict";return Object.create||(Object.create=function(e,t){function r(){}if("object"!=typeof e)throw new TypeError;r.prototype=e;var n=new r;if(e&&(n.constructor=r),arguments.length>1){if(t!==Object(t))throw new TypeError;Object.defineProperties(n,t)}return n}),Object.create},window.qoopido=window.qoopido||{}),function(e,t){t.register?t.register("polyfill/object/getownpropertynames",e):(t.modules=t.modules||{})["polyfill/object/getownpropertynames"]=e()}(function(){"use strict";return Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}),Object.getOwnPropertyNames},window.qoopido=window.qoopido||{}),function(e,t){t.register?t.register("polyfill/object/getownpropertydescriptor",e):(t.modules=t.modules||{})["polyfill/object/getownpropertydescriptor"]=e()}(function(){"use strict";if(!Object.getOwnPropertyDescriptor||!function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()){var e=Object.getOwnPropertyDescriptor;Object.getOwnPropertyDescriptor=function(t,r){if(t!==Object(t))throw new TypeError;try{return e.call(Object,t,r)}catch(n){}return Object.prototype.hasOwnProperty.call(t,r)?{value:t[r],enumerable:!0,writable:!0,configurable:!0}:void 0}}return Object.getOwnPropertyDescriptor},window.qoopido=window.qoopido||{}),function(e,t,r,n,o,i){"use strict";function c(e,t,c,s){var l,d=e.split("/");return p[e]?p[e]:(l=function(){if(c)for(var l,m,y=d.slice(0,-1).join("/"),h=0;(l=c[h])!==i;h++)m=f.test(l),m&&(l=a(y+"/"+l)),!p[l]&&arguments[h]&&(p[l]=arguments[h]),m&&!p[l]&&"undefined"!=typeof console&&console.error("".concat("[Qoopido.js] ",e,": Could not load dependency ",l));return p[e]=t(p,u,d,r,n,o,i),s&&s(p[e]),p[e]},void("undefined"!=typeof module&&module.exports?module.exports=define(l):"function"==typeof define&&define.amd?c?define(c,l):define(l):l()))}function s(e,t,r){c(e,t,r,function(t){p[e]=t.create()})}function a(e){for(var t;(t=e.replace(m,""))!==e;)e=t;return e.replace(y,"")}var l=t.qoopido||(t.qoopido={register:c,registerSingleton:s}),u=l.shared||(l.shared={}),p=l.modules||(l.modules={}),d=[],f=new RegExp("^\\.+\\/"),m=new RegExp("(?:\\/|)[^\\/]*\\/\\.\\."),y=new RegExp("(^\\/)|\\.\\/","g");Object.create||d.push("./polyfill/object/create"),Object.getOwnPropertyNames||d.push("./polyfill/object/getownpropertynames"),Object.getOwnPropertyDescriptor&&function(){try{return Object.getOwnPropertyDescriptor({x:0},"x"),!0}catch(e){return!1}}()||d.push("./polyfill/object/getownpropertydescriptor"),c("base",e,d)}(function(e,t,r,n,o,i,c){"use strict";function s(e){for(var t,r={},n=Object.getOwnPropertyNames(e),o=0;(t=n[o])!==c;o++)r[t]=Object.getOwnPropertyDescriptor(e,t);return r}function a(){throw new Error("[Qoopido.js] Operation prohibited")}return{create:function(){var e,t=Object.create(this,s(this));return t._constructor&&(e=t._constructor.apply(t,arguments)),t.create=t.extend=a,e||t},extend:function(e,t){var r;return e=e||{},t=t===!0,e._parent=this,r=Object.create(this,s(e)),t===!0&&(r.extend=a),r}}},this,navigator,window,document),function(e){window.qoopido.register("polyfill/window/getcomputedstyle",e)}(function(e,t,r,n,o){"use strict";if(o.getComputedStyle)return o.getComputedStyle;var i=new RegExp("(\\-([a-z]){1})","g"),c=function(){return arguments[2].toUpperCase()};return function(e){var t=this;return t.getPropertyValue=function(t){return"float"===t&&(t="styleFloat"),i.test(t)&&(t=t.replace(i,c)),e.currentStyle[t]||null},t}}),function(e){var t=[];window.getComputedStyle||t.push("polyfill/window/getcomputedstyle"),Array.prototype.indexOf||t.push("../array/indexof"),window.qoopido.register("polyfill/window/matchmedia",e,t)}(function(e,t,r,n,o,i,c){"use strict";function s(){var e=o.innerWidth||y.clientWidth,t=o.innerHeight||y.clientHeight,r=o.screen.width,n=o.screen.height,i=o.screen.colorDepth,c=o.devicePixelRatio;g.width=e,g.height=t,g["aspect-ratio"]=(e/t).toFixed(2),g.color=i,g["color-index"]=Math.pow(2,i),g["device-aspect-ratio"]=(r/n).toFixed(2),g["device-height"]=n,g["device-width"]=r,g["device-pixel-ratio"]=c||1,g.resolution=c&&96*c||o.screen.deviceXDPI||96,g.orientation=t>=e?"portrait":"landscape"}function a(e){var t,r,n={matches:!1,media:e,addListener:function(e){e&&r.push(e)},removeListener:function(e){for(var t,n=0;(t=r[n])!==c;n++)t===e&&r.splice(n,1)}};return n.matches=""===e?!0:l(e),h.push({mql:n,listeners:[]}),t=h.length-1,w[e]=t,r=h[t].listeners,n}function l(e){var t=-1!==e.indexOf(",")&&e.split(",")||[e],r=t.length-1,n=r,o=null,i=null,c="",s=0,a=!1,l="",u="",p=null,d=0,f=0,m=null,y="",h="",w="",O="",j="",v=!1;if(""===e)return!0;do if(o=t[n-r],a=!1,i=o.match(b.type),i&&(c=i[0],s=i.index),!i||-1===o.substring(0,s).indexOf("(")&&(s||!i[3]&&c!==i.input))v=!1;else{if(u=o,a="not"===i[1],s||(l=i[2],u=o.substring(c.length)),v=l===g.type||"all"===l||""===l,p=-1!==u.indexOf(" and ")&&u.split(" and ")||[u],d=p.length-1,f=d,v&&d>=0&&""!==u)do{if(m=p[d].match(b.media),!m||!g[m[3]]){v=!1;break}if(y=m[2],h=m[5],O=h,w=m[7],j=g[m[3]],w&&(O="px"===w?Number(h):"em"===w||"rem"===w?16*h:m[8]?(h/m[8]).toFixed(2):"dppx"===w?96*h:"dpcm"===w?.3937*h:Number(h)),v="min-"===y&&O?j>=O:"max-"===y&&O?O>=j:O?j===O:!!j,!v)break}while(d--);if(v)break}while(r--);return a?!v:v}function u(){var e,t,r=!1,n=0,i=0;if(h.length>0)for(s();(e=h[n])!==c;n++)if(r=l(e.mql.media),(r&&!e.mql.matches||!r&&e.mql.matches)&&(e.mql.matches=r,e.listeners))for(;(t=e.listeners[i])!==c;i++)t.call(o,e.mql)}function p(){o.clearTimeout(f),f=o.setTimeout(u,10)}function d(){var t,r=o.document.getElementsByTagName("script")[0],n=i.createElement("style"),s=["screen","print","speech","projection","handheld","tv","braille","embossed","tty"],a="#"+m+" { position: relative; z-index: 0; }",l="",u=o.addEventListener||(l="on")&&o.attachEvent,d=0;for(n.type="text/css",n.id=m,r.parentNode.insertBefore(n,r);(t=s[d])!==c;d++)a+="@media "+t+" { #"+m+" { position: relative; z-index: "+d+" } }";n.styleSheet?n.styleSheet.cssText=a:n.textContent=a,g.type=s[1*(o.getComputedStyle||e["polyfill/window/getcomputedstyle"])(n).zIndex||0],n.parentNode.removeChild(n),u(l+"resize",p),u(l+"orientationchange",p)}var f,m="qoopidoPolyfillWindowMatchmedia",y=i.documentElement,h=[],w={},g={},b={type:/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,media:/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/};return o.matchMedia||(d(),s(),o.matchMedia=function(e){var t=w[e]||!1;return t===!1?a(e):h[t].mql}),o.matchMedia}),function(e){window.qoopido.register("emitter",e,["./base"])}(function(e,t,r,n,o,i,c){"use strict";function s(e,t){var r=t.charAt(0).toUpperCase()+t.slice(1);return e._mapped[t]=e[t],function(){var n,o=Array.prototype.slice.call(arguments);return e.emit.apply(e,["pre"+r,o]),n=e._mapped[t].apply(e,o),e.emit.apply(e,["post"+r,o,n]),n}}var a=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.base.extend({_mapped:null,_listener:null,_temp:null,_constructor:function(){var e,t=this;t._mapped={},t._listener={};for(e in t)"function"==typeof t[e]&&a.test(e)===!1&&(t[e]=s(t,e))},on:function(e,t){var r,n=this,o=0;for(e=e.split(" ");(r=e[o])!==c;o++)(n._listener[r]=n._listener[r]||[]).push(t);return n},one:function(e,t,r){r=r!==!1;var n=this;return n.on(e,function o(i){n.off(r===!0?i:e,o),t.apply(this,arguments)}),n},off:function(e,t){var r,n,o,i=this,s=0;if(e)for(e=e.split(" ");(r=e[s])!==c;s++)if(i._listener[r]=i._listener[r]||[],t)for(n=0;(o=i._listener[r][n])!==c;n++)o===t&&(i._listener[r].splice(n,1),n--);else i._listener[r].length=0;else for(r in i._listener)i._listener[r].length=0;return i},emit:function(e){var t,r=this,n=0;if(e!==c){for(r._listener[e]=r._listener[e]||[],r._temp=r._listener[e].slice();(t=r._temp[n])!==c;n++)t.apply(r,arguments);r._temp.length=0}return r}})}),function(e){var t=["../emitter"];window.matchMedia||t.push("../polyfill/window/matchmedia"),window.qoopido.register("component/sense",e,t)}(function(e,t,r,n,o){"use strict";function i(){var e=this,t=e.mql;e.emit(t.matches===!0?"matched":"dematched")}var c,s={};return c=e.emitter.extend({mql:null,_constructor:function(e){var t=this,r=t.mql=s[e]||(s[e]=o.matchMedia(e)),n=function(){i.call(t)};c._parent._constructor.call(t),r.addListener(n),o.setTimeout(n,0)},matches:function(){return this.mql.matches}})}),function(e){window.qoopido.registerSingleton("component/remux",e,["../emitter","./sense"])}(function(e,t,r,n,o,i){"use strict";function c(e,t){var r=this;return e&&t&&(l.className=e,l.style.fontSize=t+"px",p.layout=e,p.fontsize=t,(d.fontsize!==p.fontsize||d.layout!==p.layout)&&(p.ratio.device=o.devicePixelRatio||1,p.ratio.fontsize=p.fontsize/u,p.ratio.total=p.ratio.device*p.ratio.fontsize,d.layout!==p.layout&&r.emit("layoutchanged",p),d.fontsize!==p.fontsize&&r.emit("fontsizechanged",p),r.emit("statechanged",p),d.fontsize=p.fontsize,d.layout=p.layout)),r}function s(t,r,n){var i=this;o.setTimeout(function(){e["component/sense"].create(t).on("matched",function(){c.call(i,r,n)})},0)}var a,l=i.getElementsByTagName("html")[0],u=16,p={fontsize:null,layout:null,ratio:{}},d={fontsize:null,layout:null};return a=e.emitter.extend({_constructor:function(){var e=this,t=parseInt(l.getAttribute("data-base"),10);a._parent._constructor.call(e),isNaN(t)===!1&&(u=t)},getState:function(){return p},getLayout:function(){return p.layout},getFontsize:function(){return p.fontsize},setLayout:function(e,t){var r=this;return c.call(r,e,t),r},addLayout:function(e,t){var r,n,o,i,c,a,l,p,d=this;arguments.length>1?(r={},r[e]=t):r=arguments[0];for(n in r)for(o=r[n],i=o.min;i<=o.max;i++)l=Math.round(o.width*(i/u)),p=Math.round(o.width*((i+1)/u))-1,s.call(d,"screen and (min-width: "+l+"px) and (max-width: "+p+"px )",n,i),c=!c||l<c.width?{width:l,fontsize:i,layout:n}:c,a=!a||p>=a.width?{width:p,fontsize:i,layout:n}:a;return s.call(d,"screen and (max-width: "+(c.width-1)+"px)",c.layout,c.fontsize),s.call(d,"screen and (min-width: "+(a.width+1)+"px)",a.layout,a.fontsize),d}})});