(function(e,t,n,r){"use strict";function o(){return[].push.apply(arguments,[t,n,r]),t[i]=t[i]||{},t[i][s]=e.apply(null,arguments)}var i="qoopido",s="emitter";typeof define=="function"&&define.amd?define(["./base"],o):o(t[i].base)})(function(e,t,n,r){"use strict";var i=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.extend({_mapped:null,_listener:null,_constructor:function(){var t=this,n;t._listener={},t._mapped={};for(n in t)typeof t[n]=="function"&&i.test(n)===!1&&(t[n]=t._map(n))},_map:function(t){var n=this,r=t.charAt(0).toUpperCase()+t.slice(1);return n._mapped[t]=n[t],function(){var e=Array.prototype.slice.call(arguments),i;return n.emit.apply(n,["pre"+r,e]),i=n._mapped[t].apply(n,e),n.emit.apply(n,["post"+r,i,e]),i}},on:function(t,n){var i=this;return t!==r&&n!==r&&(i._listener[t]=i._listener[t]||[]).push(n),i},one:function(t,n){var i=this;return t!==r&&n!==r&&(n.once=!0,i.on(t,n)),i},off:function(t,n){var i=this,s;if(t!==r){i._listener[t]=i._listener[t]||[];if(n)while((s=i._listener[t].indexOf(n))!==-1)i._listener[t].splice(s,1);else i._listener[t].length=0}return i},emit:function(t){var n=this,i=Array.prototype.slice.call(arguments).splice(1),s,o;if(t!==r){n._listener[t]=n._listener[t]||[];for(s=0;(o=n._listener[t][s])!==r;s++)o.apply(n,i),o.once===!0&&(n._listener[t].splice(s,1),s--)}return n}})},window,document);