(function(t,e,n,r){"use strict";var o="qoopido/xhr",s=function s(){for(var s=(o=o.split("/")).splice(o.length-1,1),i=e,u=0;o[u]!==r;u++)i[o[u]]=i[o[u]]||{},i=i[o[u]];return[].push.apply(arguments,[e,n,r]),i[s]=t.apply(null,arguments).create()};"function"==typeof define&&define.amd?define(["qoopido/base","qoopido/unique","q"],s):s(e.qoopido.base,e.qoopido.unique,e.Q)})(function(t,e,n,r){"use strict";function o(){if(r.XMLHttpRequest)return new r.XMLHttpRequest;try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return null}}function s(t,e,n){var r=this,o=r.xhr;n="object"==typeof n?p(n):n,e=n&&"GET"===t?"".concat(e,e.indexOf("?")>-1?"&":"?",n):e,o.open(t,e,!0,null,null),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n&&"GET"!==t&&o.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8 "),o.setRequestHeader("Accepts","application/json"),o.timeout=5200,o.onprogress=function(){u.apply(r)},o.onreadystatechange=function(){a.apply(r)},o.send(n||null),r.timeout=setTimeout(i,5e3)}function i(t){t.abort()}function u(){this.dfd.notify()}function a(){var t=this,e=t.xhr,n=t.dfd;4===e.readyState&&(clearTimeout(t.timeout),200===e.status?n.resolve(e.responseText,e):n.reject(e.status,e))}function p(t,e){var n,r,o,s="",i=[];for(n in t)r=e?"".concat(e,"[",n,"]"):n,o=t[n],i.push("object"==typeof v?p(o,r):"".concat(encodeURIComponent(r),"=",encodeURIComponent(o)));return s.concat.apply(s,i)}var c;return c=t.extend({load:function(t,r,i,u){var a={};return u=u||!0,r=u===!0?"".concat(r,r.indexOf("?")>-1?"&":"?","_="+(new Date).getTime()):r,a.id=e.string(),a.dfd=n.defer(),a.xhr=o(),a.timeout=null,s.apply(a,[t.toUpperCase(),r,i]),a.dfd.promise},get:function(t,e,n){return this.load("GET",t,e,n)},post:function(t,e,n){return this.load("POST",t,e,n)},put:function(t,e,n){return this.load("PUT",t,e,n)},"delete":function(t,e,n){return this.load("DELETE",t,e,n)},head:function(t,e,n){return this.load("HEAD",t,e,n)}})},window,document);