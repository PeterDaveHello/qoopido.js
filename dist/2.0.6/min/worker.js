(function(e,t){"use strict";var r="qoopido/worker",o=function o(){return t.qoopido.shared.prepareModule(r,e,arguments)};"function"==typeof define&&define.amd?define(["./base","./support","q"],o):o(t.qoopido.base,t.qoopido.support,t.Q)})(function(e,t,r){"use strict";var o=t.supportsMethod("Worker");return e.extend({execute:function(e,t,n){var i=r.defer();if(n=n||[],o===!0){var s=new Worker(e);s.addEventListener("message",function(e){switch(e.data.type){case"progress":i.notify(e.data.progress);break;case"result":i.resolve(e.data.result)}},!1),s.addEventListener("error",function(e){i.reject(e)},!1),s.postMessage({func:""+t,args:n})}else setTimeout(function(){try{i.resolve(t.apply(null,n))}catch(e){i.reject()}},0);return i.promise}})},window,document);