(function(t,e,n,r){"use strict";var o="qoopido/worker",s=function s(){for(var s=(o=o.split("/")).splice(o.length-1,1),i=e,u=0;o[u]!==r;u++)i[o[u]]=i[o[u]]||{},i=i[o[u]];return[].push.apply(arguments,[e,n,r]),i[s]=t.apply(null,arguments)};"function"==typeof define&&define.amd?define(["./base","./support","q"],s):s(e.qoopido.base,e.qoopido.support,e.Q)})(function(t,e,n){"use strict";var r=e.supportsMethod("Worker");return t.extend({execute:function(t,e,o){var s=n.defer();if(o=o||[],r===!0){var i=new Worker(t);i.addEventListener("message",function(t){switch(t.data.type){case"progress":s.notify(t.data.progress);break;case"result":s.resolve(t.data.result)}},!1),i.addEventListener("error",function(t){s.reject(t)},!1),i.postMessage({func:""+e,args:o})}else setTimeout(function(){try{s.resolve(e.apply(null,o))}catch(t){s.reject()}},0);return s.promise}})},window,document);