(function(e,t,r,n){"use strict";var o="qoopido/emitter",i=function i(){for(var i=(o=o.split("/")).splice(o.length-1,1),c=t,p=0;o[p]!==n;p++)c[o[p]]=c[o[p]]||{},c=c[o[p]];return[].push.apply(arguments,[t,r,n]),c[i]=e.apply(null,arguments)};"function"==typeof define&&define.amd?define(["./base"],i):i(t.qoopido.base)})(function(e,t,r,n){"use strict";var o=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.extend({_mapped:null,_listener:null,_constructor:function(){var e,t=this;t._listener={},t._mapped={};for(e in t)"function"==typeof t[e]&&o.test(e)===!1&&(t[e]=t._map(e))},_map:function(e){var t=this,r=e.charAt(0).toUpperCase()+e.slice(1);return t._mapped[e]=t[e],function(){var n,o=Array.prototype.slice.call(arguments);return t.emit.apply(t,["pre"+r,o]),n=t._mapped[e].apply(t,o),t.emit.apply(t,["post"+r,n,o]),n}},on:function(e,t){var r=this;return e!==n&&t!==n&&(r._listener[e]=r._listener[e]||[]).push(t),r},one:function(e,t){var r=this;return e!==n&&t!==n&&(t.once=!0,r.on(e,t)),r},off:function(e,t){var r,o=this;if(e!==n)if(o._listener[e]=o._listener[e]||[],t)for(;-1!==(r=o._listener[e].indexOf(t));)o._listener[e].splice(r,1);else o._listener[e].length=0;return o},emit:function(e){var t,r,o=this,i=Array.prototype.slice.call(arguments).splice(1);if(e!==n)for(o._listener[e]=o._listener[e]||[],t=0;(r=o._listener[e][t])!==n;t++)r.apply(o,i),r.once===!0&&(o._listener[e].splice(t,1),t--);return o}})},window,document);