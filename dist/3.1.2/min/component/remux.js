(function(t){window.qoopido.registerSingleton("component/remux",t,["../emitter"])})(function(t,e,n,r,i){"use strict";function o(){var t=this;return c.fontsize=parseInt(r.getComputedStyle(u).getPropertyValue("font-size"),10),c.layout=r.getComputedStyle(u,":after").getPropertyValue("content")||null,(c.fontsize!==f.fontsize||c.layout!==f.layout)&&(f.fontsize=c.fontsize,f.layout=c.layout,c.ratio.device=r.devicePixelRatio||1,c.ratio.fontsize=c.fontsize/l,c.ratio.total=c.ratio.device*c.ratio.fontsize,t.emit("statechange",c)),t}var a,s,u=i.getElementsByTagName("html")[0],l=16,c={fontsize:null,layout:null,ratio:{}},f={fontsize:null,layout:null},d=null;return a=t.emitter.extend({_constructor:function(){var t=this,e=parseInt(u.getAttribute("data-base"),10),n=function n(){null!==d&&r.clearTimeout(d),d=r.setTimeout(function(){o.call(t)},20)};a._parent._constructor.call(t),isNaN(e)===!1&&(l=e),s=i.createElement("style"),s.type="text/css",i.getElementsByTagName("head")[0].appendChild(s),r.addEventListener("resize",n,!1),r.addEventListener("orientationchange",n,!1),o.call(t)},getState:function(){return c},addLayout:function(t,e){var n,r,a,u,c,f,d=this;arguments.length>1?(n={},n[t]=e):n=arguments[0];for(r in n)for(a=n[r],u=a.min;a.max>=u;u++)c=Math.round(a.width*(u/l)),f="@media screen and (min-width: "+c+"px) { html { font-size: "+u+'px; } html:after { content: "'+r+'"; display: none; } }',s.styleSheet?s.styleSheet.cssText+=f:s.appendChild(i.createTextNode(f));return o.call(d),d}})});