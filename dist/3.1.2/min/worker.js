(function(t){window.qoopido.register("worker",t,["./base","./support","q"])})(function(t,e,o,r){"use strict";var n=t.q||r.Q,i=RegExp("Blob$","i"),s=t.support.supportsMethod("Worker"),u=t.support.supportsMethod("URL")?r[t.support.getMethod("URL")]:null,a=t.support.getMethod("Blob")||t.support.getMethod("BlobBuilder"),c="var self = this, regex = new RegExp(',\\s+', 'g'); self.addEventListener('message', function(pEvent) { self.postMessage({ type: 'result', result: self.process(pEvent.data.func).apply(null, pEvent.data.args)}); }, false); self.postProgress = function(pProgress) { self.postMessage({ type: 'progress', progress: pProgress}); }; self.process = function(pFunction) { var functionArguments = pFunction.substring(pFunction.indexOf('(') + 1, pFunction.indexOf(')')).replace(regex, ',').split(','); functionArguments.push(pFunction.substring(pFunction.indexOf('{') + 1, pFunction.lastIndexOf('}'))); return Function.apply(null, functionArguments); };",l=null;return s&&u&&a&&(l=i.test(a)===!0?u.createObjectURL(new r[a]([c],{type:"text/javascript"})):u.createObjectURL((new r[a]).append(c).getBlob("text/javascript"))),t.base.extend({execute:function(t,e){var o=n.defer();if(e=e||[],l){var r=new Worker(l);r.addEventListener("message",function(t){switch(t.data.type){case"progress":o.notify(t.data.progress);break;case"result":o.resolve(t.data.result)}},!1),r.addEventListener("error",function(t){o.reject(t)},!1),r.postMessage({func:""+t,args:e})}else setTimeout(function(){try{o.resolve(t.apply(null,e))}catch(r){o.reject()}},0);return o.promise}})});