(function(t){window.qoopido.register("dom/element/emerge",t,["../element","../../function/merge","../../function/unique/uuid"])})(function(t,e,n,r,i,o){"use strict";function l(t){var e,n=m[t];for(e in n)"length"!==e&&u.call(n[e]);0===n.length&&(r.element.clearInterval(d[t]),delete d[t])}function s(){h.left=0,h.top=0,h.right=g.clientWidth,h.bottom=g.clientHeight}function a(){var t=this,e=t._settings.threshold||g.clientWidth*t._settings.auto,n=t._settings.threshold||g.clientHeight*t._settings.auto;t._viewport.left=h.left-e,t._viewport.top=h.top-n,t._viewport.right=h.right+e,t._viewport.bottom=h.bottom+n}function u(){var t,e=this,n=!1,r=2;!e.isVisible()||"hidden"===e.getStyle("visibility")&&e._settings.visibility!==!1||(t=e.element.getBoundingClientRect(),(t.left>=e._viewport.left&&t.top>=e._viewport.top&&t.left<=e._viewport.right&&t.top<=e._viewport.bottom||t.right>=e._viewport.left&&t.bottom>=e._viewport.top&&t.right<=e._viewport.right&&t.bottom<=e._viewport.bottom)&&((t.left>=h.left&&t.top>=h.top&&t.left<=h.right&&t.top<=h.bottom||t.right>=h.left&&t.bottom>=h.top&&t.right<=h.right&&t.bottom<=h.bottom)&&(r=1),n=!0)),(n!==e._state||n===!0&&r!==e._priority)&&c.call(e,n,r)}function c(t,e){var n=this;n._state=t,n._priority=e,n._settings.recur!==!0&&n.remove(),t===!0?n.emit(v,e):n.emit(_)}var f,p={interval:50,threshold:"auto",recur:!0,auto:.5,visibility:!0},g=r.document.documentElement,h={},d={},m={},v="emerged",_="demerged",y="resize orientationchange";if(r=t["dom/element"].create(r),"CSS1Compat"!==i.compatMode)throw"This script requires your browser to work in standards mode";return f=t["dom/element"].extend({_quid:null,_viewport:null,_element:null,_settings:null,_state:null,_priority:null,_constructor:function(e,n){var i=this;f._parent._constructor.call(i,e),n=t["function/merge"]({},p,n||{}),"auto"===n.threshold&&delete n.threshold,d[n.interval]===o&&(m[n.interval]=m[n.interval]||{length:0},d[n.interval]=r.element.setInterval(function(){l(n.interval)},n.interval)),i._quid=t["function/unique/uuid"](),i._viewport={},i._settings=n,i._state=!1,i._priority=2,m[n.interval][i._quid]=i,m[n.interval].length++,r.on(y,function(){a.call(i)}),a.call(i)},remove:function(){var t=this;delete m[t._settings.interval][t._quid],m[t._settings.interval].length--}}),r.on(y,s),s(),f});