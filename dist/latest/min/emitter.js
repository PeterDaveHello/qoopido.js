(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("emitter",e,arguments)}"function"==typeof define&&define.amd?define(["./base"],n):n(t.qoopido.base)})(function(e,t,n,r,i){"use strict";function o(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);return e._mapped[t]=e[t],function(){var r,i=Array.prototype.slice.call(arguments);return e.emit.apply(e,["pre"+n,i]),r=e._mapped[t].apply(e,i),e.emit.apply(e,["post"+n,r,i]),r}}var l=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.extend({_mapped:null,_listener:null,_constructor:function(){var e,t=this;t._listener={},t._mapped={};for(e in t)"function"==typeof t[e]&&l.test(e)===!1&&(t[e]=o(t,e))},on:function(e,t){var n=this;return e!==i&&t!==i&&(n._listener[e]=n._listener[e]||[]).push(t),n},one:function(e,t){var n=this;return e!==i&&t!==i&&(t.once=!0,n.on(e,t)),n},off:function(e,t){var n,r=this;if(e!==i)if(r._listener[e]=r._listener[e]||[],t)for(;-1!==(n=r._listener[e].indexOf(t));)r._listener[e].splice(n,1);else r._listener[e].length=0;return r},emit:function(e){var t,n,r=this,o=Array.prototype.slice.call(arguments).splice(1);if(e!==i)for(r._listener[e]=r._listener[e]||[],t=0;(n=r._listener[e][t])!==i;t++)n.apply(r,o),n.once===!0&&(r._listener[e].splice(t,1),t--);return r}})},window);