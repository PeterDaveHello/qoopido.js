(function(e,t){"use strict";var n=function n(){return t.qoopido.shared.module.initialize("module/lazyimage",e,arguments)};"function"==typeof define&&define.amd?define(["./emerge","../function/merge"],n):n(t.qoopido.module.emerge,t.qoopido.function.merge)})(function(e,t){"use strict";function n(){function e(){o-=1,r.off(s,t),n.emit(a)}function t(){o-=1,r.off(c,e)}var n=this,r=n._element;o+=1,n.emit(u),r.one(c,e).one(s,t),r.setAttribute("src",r.getAttribute(n._settings.attribute)),r.removeAttribute(n._settings.attribute)}var r,i={interval:50,threshold:"auto",attribute:"data-lazyimage"},o=0,u="requested",a="loaded",c="load",s="error",l="emerged";return r=e.extend({_constructor:function(e,u){function a(){d.off(f)}function f(){d.off(a)}function p(e){(0===o||1===e)&&(d.remove(),d.off(l,p),n.call(d))}var d=this;u=t({},i,u||{}),r._parent._constructor.call(d,e,u),e=d._element,e.getAttribute("src")||e.one(c,a).one(s,f).setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),d.on(l,p)},remove:function(){r._parent.remove.call(this)}})},window);