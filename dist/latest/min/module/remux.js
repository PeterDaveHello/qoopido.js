(function(t,e){"use strict";var n=function n(){return e.qoopido.shared.module.initialize("module/remux",t,arguments,!0)};"function"==typeof define&&define.amd?define(["../emitter"],n):n(e.qoopido.emitter)})(function(t,e,n,r){"use strict";function i(){var t=this;return l.fontsize=parseInt(n.getComputedStyle(u).getPropertyValue("font-size"),10),l.layout=n.getComputedStyle(u,":after").getPropertyValue("content")||null,(l.fontsize!==c.fontsize||l.layout!==c.layout)&&(c.fontsize=l.fontsize,c.layout=l.layout,l.ratio.device=n.devicePixelRatio||1,l.ratio.fontsize=l.fontsize/s,l.ratio.total=l.ratio.device*l.ratio.fontsize,t.emit("statechange",l)),t}var o,a,u=r.getElementsByTagName("html")[0],s=16,l={fontsize:null,layout:null,ratio:{}},c={fontsize:null,layout:null},f=null;return o=t.extend({_constructor:function(){var t=this,e=parseInt(u.getAttribute("data-base"),10),l=function l(){null!==f&&n.clearTimeout(f),f=n.setTimeout(function(){i.call(t)},20)};o._parent._constructor.call(t),isNaN(e)===!1&&(s=e),a=r.createElement("style"),a.type="text/css",r.getElementsByTagName("head")[0].appendChild(a),n.addEventListener("resize",l,!1),n.addEventListener("orientationchange",l,!1),i.call(t)},getState:function(){return l},addLayout:function(t,e){var n,i,o,u,l,c,f=this;arguments.length>1?(n={},n[t]=e):n=arguments[0];for(i in n)for(o=n[i],u=o.min;o.max>=u;u++)l=Math.round(o.width*(u/s)),c="@media screen and (min-width: "+l+"px) { html { font-size: "+u+'px; } html:after { content: "'+i+'"; display: none; } }',a.styleSheet?a.styleSheet.cssText+=c:a.appendChild(r.createTextNode(c));return f.updateState(),f}})},window);