/*!
* Qoopido.js library v3.4.5, 2014-7-9
* https://github.com/dlueth/qoopido.js
* (c) 2014 Dirk Lueth
* Dual licensed under MIT and GPL
*/
!function(t){window.qoopido.registerSingleton("component/remux",t,["../emitter","./sense"])}(function(t,n,e,i,o,a){"use strict";function r(t,n){var e=this;return t&&n&&(l.className=t,l.style.fontSize=n+"px",f.layout=t,f.fontsize=n,(d.fontsize!==f.fontsize||d.layout!==f.layout)&&(f.ratio.device=o.devicePixelRatio||1,f.ratio.fontsize=f.fontsize/c,f.ratio.total=f.ratio.device*f.ratio.fontsize,d.layout!==f.layout&&e.emit("layoutchanged",f),d.fontsize!==f.fontsize&&e.emit("fontsizechanged",f),e.emit("statechanged",f),d.fontsize=f.fontsize,d.layout=f.layout)),e}function u(n,e,i){var o=this;t["component/sense"].create(n).on("matched",function(){r.call(o,e,i)})}var s,l=a.getElementsByTagName("html")[0],c=16,f={fontsize:null,layout:null,ratio:{}},d={fontsize:null,layout:null};return s=t.emitter.extend({_constructor:function(){var t=this,n=parseInt(l.getAttribute("data-base"),10);s._parent._constructor.call(t),isNaN(n)===!1&&(c=n)},getState:function(){return f},getLayout:function(){return f.layout},getFontsize:function(){return f.fontsize},setLayout:function(t,n){var e=this;return r.call(e,t,n),e},addLayout:function(t,n){var e,i,o,a,r,s,l,f,d=this;arguments.length>1?(e={},e[t]=n):e=arguments[0];for(i in e)for(o=e[i],a=o.min;a<=o.max;a++)l=Math.round(o.width*(a/c)),f=Math.round(o.width*((a+1)/c))-1,u.call(d,"screen and (min-width: "+l+"px) and (max-width: "+f+"px )",i,a),r=!r||l<r.width?{width:l,fontsize:a,layout:i}:r,s=!s||f>=s.width?{width:f,fontsize:a,layout:i}:s;return u.call(d,"screen and (max-width: "+(r.width-1)+"px)",r.layout,r.fontsize),u.call(d,"screen and (min-width: "+(s.width+1)+"px)",s.layout,s.fontsize),d}})});