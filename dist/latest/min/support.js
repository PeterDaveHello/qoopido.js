(function(t,e){"use strict";function n(){return e.qoopido.shared.module.initialize("support",t,!0)}"function"==typeof define&&define.amd?define(["./base","q"],n):n()})(function(t,e,n,r,i){"use strict";function o(){return arguments.length>1?arguments[1].toUpperCase():arguments[0].charAt(0).toUpperCase()+arguments[0].slice(1)}var u=n.Q,a=/-([a-z])/gi,s={prefix:null,property:{},method:{},element:{},promises:{prefix:null,property:{},method:{},test:{}}};return t.base.extend({test:{},testMultiple:function(){var t,e=[],n=0;for(n;(t=arguments[n])!==i;n++)switch(typeof t){case"string":e.push(this.test[t]());break;case"boolean":var r=u.defer();t?r.resolve():r.reject(),e.push(r.promise);break;default:e.push(t)}return u.all(e)},getElement:function(t,e){var n=s.element[t]=s.element[t]||"image"!==t?r.createElement(t):new Image;return e=!!e,e?n.cloneNode(!1):n},getPrefix:function(){var t,e=s.prefix||null;if(null===e){var n=this.getElement("div").style,r=/^(Moz|WebKit|Khtml|ms|O|Icab)(?=[A-Z])/;e=!1;for(t in n)r.test(t)&&(e=t.match(r)[0]);e===!1&&"WebkitOpacity"in n&&(e="WebKit"),e===!1&&"KhtmlOpacity"in n&&(e="Khtml"),e=s.prefix=e===!1?!1:{method:e,properties:[e.toLowerCase(),o(e.toLowerCase())]}}return e},getProperty:function(t){t=t.replace(a,o);var e=s.property[t]||null;if(null===e){e=!1;var n,r=0,u=this.getElement("div"),l=o(t),c=(this.getPrefix()||{properties:[]}).properties,f=(t+" "+c.join(l+" ")+l).split(" ");for(r;(n=f[r])!==i;r++)if(u.style[n]!==i){e=n;break}s.property[t]=e}return e},getMethod:function(t,e){e=e||n;var r=e.tagName,u=s.method[r]=s.method[r]||{},a=u[t]=s.method[r][t]||null;if(null===a){a=!1;var l,c,f=0,p=o(t),d=this.getPrefix();for(l=d!==!1?(t+" "+d.method+p+" "+d.properties.join(p+" ")+p).split(" "):[t],f;(c=l[f])!==i;f++)if(e[c]!==i&&("function"==typeof e[c]||"object"==typeof e[c])){a=c;break}s.method[r][t]=a}return a},supportsPrefix:function(){return!!this.getPrefix()},supportsProperty:function(t){return!!this.getProperty(t)},supportsMethod:function(t,e){return!!this.getMethod(t,e)},testPrefix:function(){var t=s.promises.prefix;if(null===t){var e=u.defer(),n=this.getPrefix();n?e.resolve(n):e.reject(),t=s.promises.prefix=e.promise}return t},testProperty:function(t){var e=s.promises.property[t]||null;if(null===e){var n=u.defer(),r=this.getProperty(t);r?n.resolve(r):n.reject(),e=s.promises.property[t]=n.promise}return e},testMethod:function(t,e){e=e||n;var r=e.tagName,i=s.promises.method[r]=s.promises.method[r]||{},o=i[t]=s.promises.method[r][t]||null;if(null===o){var a=u.defer(),l=this.getMethod(t,e);l?a.resolve(l):a.reject(),o=s.promises.method[r][t]=a.promise}return o},addTest:function(t,e){return this.test[t]=function(){var n=s.promises.test[t]||null;if(null===n){var r=u.defer(),i=Array.prototype.slice.call(arguments);i.splice(0,0,r),e.apply(null,i),n=s.promises.test[t]=r.promise}return n}}})},window);