(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("support",e,!0)}"function"==typeof define&&define.amd?define(["./base","q"],n):n()})(function(e,t,n,r,i){"use strict";function o(){return arguments.length>1?arguments[1].toUpperCase():arguments[0].charAt(0).toUpperCase()+arguments[0].slice(1)}var u=n.Q,a=RegExp("-([a-z])","gi"),s=RegExp("^(Moz|WebKit|Khtml|ms|O|Icab)(?=[A-Z])"),l={prefix:null,property:{},method:{},element:{},promises:{prefix:null,property:{},method:{},test:{}}};return e.base.extend({test:{},testMultiple:function(){var e,t=[],n=0;for(n;(e=arguments[n])!==i;n++)switch(typeof e){case"string":t.push(this.test[e]());break;case"boolean":var r=u.defer();e?r.resolve():r.reject(),t.push(r.promise);break;default:t.push(e)}return u.all(t)},getElement:function(e,t){var n=l.element[e]=l.element[e]||"image"!==e?r.createElement(e):new Image;return t=!!t,t?n.cloneNode(!1):n},getPrefix:function(){var e,t=l.prefix||null;if(null===t){var n=this.getElement("div").style;t=!1;for(e in n)s.test(e)&&(t=e.match(s)[0]);t===!1&&"WebkitOpacity"in n&&(t="WebKit"),t===!1&&"KhtmlOpacity"in n&&(t="Khtml"),t=l.prefix=t===!1?!1:{method:t,properties:[t.toLowerCase(),o(t.toLowerCase())]}}return t},getProperty:function(e){e=e.replace(a,o);var t=l.property[e]||null;if(null===t){t=!1;var n,r=0,u=this.getElement("div"),s=o(e),c=(this.getPrefix()||{properties:[]}).properties,f=(e+" "+c.join(s+" ")+s).split(" ");for(r;(n=f[r])!==i;r++)if(u.style[n]!==i){t=n;break}l.property[e]=t}return t},getMethod:function(e,t){t=t||n;var r=t.tagName,u=l.method[r]=l.method[r]||{},a=u[e]=l.method[r][e]||null;if(null===a){a=!1;var s,c,f=0,d=o(e),p=this.getPrefix();for(s=p!==!1?(e+" "+p.method+d+" "+p.properties.join(d+" ")+d).split(" "):[e],f;(c=s[f])!==i;f++)if(t[c]!==i&&("function"==typeof t[c]||"object"==typeof t[c])){a=c;break}l.method[r][e]=a}return a},supportsPrefix:function(){return!!this.getPrefix()},supportsProperty:function(e){return!!this.getProperty(e)},supportsMethod:function(e,t){return!!this.getMethod(e,t)},testPrefix:function(){var e=l.promises.prefix;if(null===e){var t=u.defer(),n=this.getPrefix();n?t.resolve(n):t.reject(),e=l.promises.prefix=t.promise}return e},testProperty:function(e){var t=l.promises.property[e]||null;if(null===t){var n=u.defer(),r=this.getProperty(e);r?n.resolve(r):n.reject(),t=l.promises.property[e]=n.promise}return t},testMethod:function(e,t){t=t||n;var r=t.tagName,i=l.promises.method[r]=l.promises.method[r]||{},o=i[e]=l.promises.method[r][e]||null;if(null===o){var a=u.defer(),s=this.getMethod(e,t);s?a.resolve(s):a.reject(),o=l.promises.method[r][e]=a.promise}return o},addTest:function(e,t){return this.test[e]=function(){var n=l.promises.test[e]||null;if(null===n){var r=u.defer(),i=Array.prototype.slice.call(arguments);i.splice(0,0,r),t.apply(null,i),n=l.promises.test[e]=r.promise}return n}}})},window);