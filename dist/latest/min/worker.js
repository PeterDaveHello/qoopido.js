(function(e,t){"use strict";function n(){return t.qoopido.initialize("worker",e,arguments,!0)}"function"==typeof define&&define.amd?define(["./base","./support","q"],n):n()})(function(e,t){"use strict";var n=window.Q||t[2],o=e.support.supportsMethod("Worker");return e.base.extend({execute:function(e,t,i){var r=n.defer();if(i=i||[],o===!0){var s=new Worker(e);s.addEventListener("message",function(e){switch(e.data.type){case"progress":r.notify(e.data.progress);break;case"result":r.resolve(e.data.result)}},!1),s.addEventListener("error",function(e){r.reject(e)},!1),s.postMessage({func:""+t,args:i})}else setTimeout(function(){try{r.resolve(t.apply(null,i))}catch(e){r.reject()}},0);return r.promise}})},window);