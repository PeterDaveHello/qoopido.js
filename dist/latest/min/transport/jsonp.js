(function(t,e){"use strict";function n(){return e.qoopido.initialize("transport/jsonp",t,arguments,!0)}"function"==typeof define&&define.amd?define(["../transport","../function/merge","../function/unique/uuid","../url","q"],n):n()})(function(t,e,n,r,i){"use strict";function o(t,e){var n=this,i=n.dfd,o=n.script,a=n.settings;e="object"==typeof e?n.serialize(e):e,t="".concat(t,t.indexOf("?")>-1?"&":"?","".concat(a.callback,"=",n.id)),t=a.cache===!1?"".concat(t,t.indexOf("?")>-1?"&":"?","".concat("_=",""+(new Date).getTime())):t,t=e?"".concat(t,t.indexOf("?")>-1?"&":"?",e):t,r[n.id]=function(t){i.resolve(t);try{delete r[n.id]}catch(e){r[n.id]=null}},o.onload=o.onreadystatechange=function(t){u.call(n,t)},o.onerror=function(){s.call(n)},o.setAttribute("src",t),d.appendChild(o)}function u(t){var e=this,n=e.dfd;t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(c.call(e),e.timeout=setTimeout(function(){a.call(e)},e.settings.timeout)),n.notify(t)}function s(){var t=this;c.call(t),t.dfd.reject()}function a(){this.dfd.reject()}function c(){var t=this.script;t.onload=t.onreadystatechange=t.onerror=null,t.parentNode.removeChild(t)}var f,l=r.Q||e[4],d=i.getElementsByTagName("head")[0];return f=t.transport.extend({_settings:{callback:"callback",cache:!1,timeout:200},load:function(e,n,r){var u={};return e=t.url.resolve(e),u.id="".concat("jsonp-",t["function/unique/string"]()),u.dfd=l.defer(),u.script=i.createElement("script"),u.settings=t["function/merge"]({},this._settings,r),u.timeout=null,u.script.setAttribute("async",!0),o.call(u,e,n),u.dfd.promise}})},window,document);