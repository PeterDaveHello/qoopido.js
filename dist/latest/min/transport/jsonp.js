(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("transport/jsonp",e,arguments,!0)}"function"==typeof define&&define.amd?define(["../transport","../function/merge","../url","../unique","q"],n):n()})(function(e,t,n,r,i){"use strict";function o(e,t){var n=this,i=n.dfd,o=n.script,a=n.settings;t="object"==typeof t?n.serialize(t):t,e="".concat(e,e.indexOf("?")>-1?"&":"?","".concat(a.callback,"=",n.id)),e=a.cache===!1?"".concat(e,e.indexOf("?")>-1?"&":"?","".concat("_=",""+(new Date).getTime())):e,e=t?"".concat(e,e.indexOf("?")>-1?"&":"?",t):e,r[n.id]=function(e){i.resolve(e);try{delete r[n.id]}catch(t){r[n.id]=null}},o.onload=o.onreadystatechange=function(e){u.call(n,e)},o.onerror=function(){s.call(n)},o.setAttribute("src",e),p.appendChild(o)}function u(e){var t=this,n=t.dfd;e.readyState&&"loaded"!==e.readyState&&"complete"!==e.readyState||(c.call(t),t.timeout=setTimeout(function(){a.call(t)},t.settings.timeout)),n.notify(e)}function s(){var e=this;c.call(e),e.dfd.reject()}function a(){this.dfd.reject()}function c(){var e=this.script;e.onload=e.onreadystatechange=e.onerror=null,e.parentNode.removeChild(e)}var l,f=r.Q||t[4],p=i.getElementsByTagName("head")[0];return l=e.transport.extend({_settings:{callback:"callback",cache:!1,timeout:200},load:function(t,n,r){var u={};return t=e.url.resolve(t),u.id="".concat("jsonp-",e.unique.string()),u.dfd=f.defer(),u.script=i.createElement("script"),u.settings=e.function.merge({},this._settings,r),u.timeout=null,u.script.setAttribute("async",!0),o.call(u,t,n),u.dfd.promise}})},window,document);