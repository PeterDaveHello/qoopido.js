(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("element/lazyimage",e,arguments)}"function"==typeof define&&define.amd?define(["./emerge","../function/merge"],n):n(t.qoopido.element.emerge,t.qoopido.function.merge)})(function(e,t){"use strict";function n(){var e=this,t=e._settings.attribute;o+=1,e.emit(l).one(p,function(t){t.type===f?e.emit(u):e.emit(c),o-=1},!1).setAttribute("src",e.getAttribute(t)).removeAttribute(t)}var r,i={interval:50,threshold:"auto",attribute:"data-lazyimage"},o=0,l="requested",u="loaded",c="failed",s="emerged",f="load",a="error",p="".concat(f," ",a);return r=e.extend({_constructor:function(e,l){var u=this;r._parent._constructor.call(u,e,t({},i,l||{})),u.on(s,function c(e){(0===o||1===e)&&(u.remove(),u.off(s,c),n.call(u))})}})},window);