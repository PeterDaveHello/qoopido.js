(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("element/lazyimage",e)}"function"==typeof define&&define.amd?define(["./emerge","../function/merge"],n):n()})(function(e){"use strict";function t(){var e=this,t=e._settings.attribute;o+=1,e.emit(i).one(a,function(t){t.type===s?e.emit(l):e.emit(u),o-=1},!1).setAttribute("src",e.getAttribute(t)).removeAttribute(t)}var n,r={interval:50,threshold:"auto",attribute:"data-lazyimage"},o=0,i="requested",l="loaded",u="failed",c="emerged",s="load",f="error",a="".concat(s," ",f);return n=e.element.emerge.extend({_constructor:function(i,l){var u=this;n._parent._constructor.call(u,i,e.function.merge({},r,l||{})),u.on(c,function s(e){(0===o||1===e)&&(u.remove(),u.off(c,s),t.call(u))})}})},window);