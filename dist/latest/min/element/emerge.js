(function(t,e){"use strict";function n(){return e.qoopido.shared.module.initialize("element/emerge",t,arguments)}"function"==typeof define&&define.amd?define(["../element","../function/merge","../unique"],n):n()})(function(t,e,n,r,i,o){"use strict";function l(t){var e,n=y[t];for(e in n)"length"!==e&&a.call(n[e]);0===n.length&&(r.element.clearInterval(_[t]),delete _[t])}function u(){h.left=0,h.top=0,h.right=d.clientWidth,h.bottom=d.clientHeight}function s(){var t=this,e=t._settings.threshold||d.clientWidth*t._settings.auto,n=t._settings.threshold||d.clientHeight*t._settings.auto;t._viewport.left=h.left-e,t._viewport.top=h.top-n,t._viewport.right=h.right+e,t._viewport.bottom=h.bottom+n}function a(){var t,e=this,n=!1,r=2;!e.isVisible()||"hidden"===e.getStyle("visibility")&&e._settings.visibility!==!1||(t=e.element.getBoundingClientRect(),(t.left>=e._viewport.left&&t.top>=e._viewport.top&&t.left<=e._viewport.right&&t.top<=e._viewport.bottom||t.right>=e._viewport.left&&t.bottom>=e._viewport.top&&t.right<=e._viewport.right&&t.bottom<=e._viewport.bottom)&&((t.left>=h.left&&t.top>=h.top&&t.left<=h.right&&t.top<=h.bottom||t.right>=h.left&&t.bottom>=h.top&&t.right<=h.right&&t.bottom<=h.bottom)&&(r=1),n=!0)),(n!==e._state||n===!0&&r!==e._priority)&&c.call(e,n,r)}function c(t,e){var n=this;n._state=t,n._priority=e,n._settings.recur!==!0&&n.remove(),t===!0?n.emit(v,e):n.emit(m)}var f,p={interval:50,threshold:"auto",recur:!0,auto:.5,visibility:!0},d=r.document.documentElement,h={},_={},y={},v="emerged",m="demerged",g="resize orientationchange";if(r=t.element.create(r),"CSS1Compat"!==i.compatMode)throw"This script requires your browser to work in standards mode";return f=t.element.extend({_viewport:null,_uuid:null,_element:null,_settings:null,_state:null,_priority:null,_constructor:function(e,n){var i=this;f._parent._constructor.call(i,e),n=t.function.merge({},p,n||{}),"auto"===n.threshold&&delete n.threshold,_[n.interval]===o&&(y[n.interval]=y[n.interval]||{length:0},_[n.interval]=r.element.setInterval(function(){l(n.interval)},n.interval)),i._viewport={},i._uuid=t.unique.uuid(),i._settings=n,i._state=!1,i._priority=2,y[n.interval][i._uuid]=i,y[n.interval].length++,r.on(g,function(){s.call(i)}),s.call(i)},remove:function(){var t=this;delete y[t._settings.interval][t._uuid],y[t._settings.interval].length--}}),r.on(g,u),u(),f},window);