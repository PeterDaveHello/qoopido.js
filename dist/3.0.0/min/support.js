(function(e,t){"use strict";function n(){return t.qoopido.shared.module.initialize("support",e,arguments,!0)}"function"==typeof define&&define.amd?define(["./base","q"],n):n()})(function(e,t,n,r,i,o){"use strict";function u(){return arguments.length>1?arguments[1].toUpperCase():arguments[0].charAt(0).toUpperCase()+arguments[0].slice(1)}var s=r.Q||t[1],a=RegExp("-([a-z])","gi"),l=RegExp("^(Moz|WebKit|Khtml|ms|O|Icab)(?=[A-Z])"),c={prefix:null,property:{},method:{},element:{},promises:{prefix:null,property:{},method:{},test:{}}};return e.base.extend({test:{},testMultiple:function(){var e,t=[],n=0;for(n;(e=arguments[n])!==o;n++)switch(typeof e){case"string":t.push(this.test[e]());break;case"boolean":var r=s.defer();e?r.resolve():r.reject(),t.push(r.promise);break;default:t.push(e)}return s.all(t)},getElement:function(e,t){var n=c.element[e]=c.element[e]||"image"!==e?i.createElement(e):new Image;return t=!!t,t?n.cloneNode(!1):n},getPrefix:function(){var e,t=c.prefix||null;if(null===t){var n=this.getElement("div").style;t=!1;for(e in n)l.test(e)&&(t=e.match(l)[0]);t===!1&&"WebkitOpacity"in n&&(t="WebKit"),t===!1&&"KhtmlOpacity"in n&&(t="Khtml"),t=c.prefix=t===!1?!1:{method:t,properties:[t.toLowerCase(),u(t.toLowerCase())]}}return t},getProperty:function(e){e=e.replace(a,u);var t=c.property[e]||null;if(null===t){t=!1;var n,r=0,i=this.getElement("div"),s=u(e),l=(this.getPrefix()||{properties:[]}).properties,f=(e+" "+l.join(s+" ")+s).split(" ");for(r;(n=f[r])!==o;r++)if(i.style[n]!==o){t=n;break}c.property[e]=t}return t},getMethod:function(e,t){t=t||r;var n=t.tagName,i=c.method[n]=c.method[n]||{},s=i[e]=c.method[n][e]||null;if(null===s){s=!1;var a,l,f=0,p=u(e),d=this.getPrefix();for(a=d!==!1?(e+" "+d.method+p+" "+d.properties.join(p+" ")+p).split(" "):[e],f;(l=a[f])!==o;f++)if(t[l]!==o&&("function"==typeof t[l]||"object"==typeof t[l])){s=l;break}c.method[n][e]=s}return s},supportsPrefix:function(){return!!this.getPrefix()},supportsProperty:function(e){return!!this.getProperty(e)},supportsMethod:function(e,t){return!!this.getMethod(e,t)},testPrefix:function(){var e=c.promises.prefix;if(null===e){var t=s.defer(),n=this.getPrefix();n?t.resolve(n):t.reject(),e=c.promises.prefix=t.promise}return e},testProperty:function(e){var t=c.promises.property[e]||null;if(null===t){var n=s.defer(),r=this.getProperty(e);r?n.resolve(r):n.reject(),t=c.promises.property[e]=n.promise}return t},testMethod:function(e,t){t=t||r;var n=t.tagName,i=c.promises.method[n]=c.promises.method[n]||{},o=i[e]=c.promises.method[n][e]||null;if(null===o){var u=s.defer(),a=this.getMethod(e,t);a?u.resolve(a):u.reject(),o=c.promises.method[n][e]=u.promise}return o},addTest:function(e,t){return this.test[e]=function(){var n=c.promises.test[e]||null;if(null===n){var r=s.defer(),i=Array.prototype.slice.call(arguments);i.splice(0,0,r),t.apply(null,i),n=c.promises.test[e]=r.promise}return n}}})},window);