(function(t,e){"use strict";function n(){return e.qoopido.shared.module.initialize("transport/jsonp",t,!0)}"function"==typeof define&&define.amd?define(["../transport","../function/merge","../url","../unique","q"],n):n()})(function(t,e,n,r){"use strict";function i(t,e){var r=this,i=r.dfd,u=r.script,a=r.settings;e="object"==typeof e?r.serialize(e):e,t="".concat(t,t.indexOf("?")>-1?"&":"?","".concat(a.callback,"=",r.id)),t=a.cache===!1?"".concat(t,t.indexOf("?")>-1?"&":"?","".concat("_=",""+(new Date).getTime())):t,t=e?"".concat(t,t.indexOf("?")>-1?"&":"?",e):t,n[r.id]=function(t){i.promise.isPending()&&i.resolve(t);try{delete n[r.id]}catch(e){n[r.id]=null}},u.onload=u.onreadystatechange=function(t){o.call(r,t)},u.onerror=function(){s.call(r)},u.setAttribute("src",t),f.appendChild(u)}function o(t){var e=this,n=e.dfd;t.readyState&&"loaded"!==t.readyState&&"complete"!==t.readyState||(a.call(e),e.timeout=setTimeout(function(){u.call(e)},e.settings.timeout)),n.notify(t)}function s(){var t=this;a.call(t),t.dfd.reject()}function u(){var t=this.dfd;t.promise.isPending()&&this.dfd.reject()}function a(){var t=this.script;t.onload=t.onreadystatechange=t.onerror=null,t.parentNode.removeChild(t)}var c,l=n.Q,f=r.getElementsByTagName("head")[0];return c=t.transport.extend({_settings:{callback:"callback",cache:!1,timeout:200},load:function(e,n,o){var s={};return e=t.url.resolve(e),s.id="".concat("jsonp-",t.unique.string()),s.dfd=l.defer(),s.script=r.createElement("script"),s.settings=t.function.merge({},this._settings,o),s.timeout=null,s.script.setAttribute("async",!0),i.call(s,e,n),s.dfd.promise}})},window,document);