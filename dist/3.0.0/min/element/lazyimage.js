(function(t,e){"use strict";function n(){return e.qoopido.shared.module.initialize("element/lazyimage",t,arguments)}"function"==typeof define&&define.amd?define(["./emerge","../function/merge"],n):n()})(function(t){"use strict";function e(){var t=this,e=t._settings.attribute;i+=1,t.emit(o).one(f,function(e){e.type===a?t.emit(l):t.emit(u),i-=1},!1).setAttribute("src",t.getAttribute(e)).removeAttribute(e)}var n,r={interval:50,threshold:"auto",attribute:"data-lazyimage"},i=0,o="requested",l="loaded",u="failed",s="emerged",a="load",c="error",f="".concat(a," ",c);return n=t.element.emerge.extend({_constructor:function(o,l){var u=this;n._parent._constructor.call(u,o,t.function.merge({},r,l||{})),u.on(s,function a(t){(0===i||1===t)&&(u.remove(),u.off(s,a),e.call(u))})}})},window);