(function(t,e){"use strict";function n(){return e.qoopido.shared.module.initialize("emitter",t,arguments)}"function"==typeof define&&define.amd?define(["./base"],n):n()})(function(t,e,n,r,i,o){"use strict";function a(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);return t._mapped[e]=t[e],function(){var r,i=Array.prototype.slice.call(arguments);return t.emit.apply(t,["pre"+n,i]),r=t._mapped[e].apply(t,i),t.emit.apply(t,["post"+n,r,i]),r}}var l=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return t.base.extend({_mapped:null,_listener:null,_constructor:function(){var t,e=this;e._listener={},e._mapped={};for(t in e)"function"==typeof e[t]&&l.test(t)===!1&&(e[t]=a(e,t))},on:function(t,e){var n=this;return t!==o&&e!==o&&(n._listener[t]=n._listener[t]||[]).push(e),n},one:function(t,e){var n=this;return t!==o&&e!==o&&(e.once=!0,n.on(t,e)),n},off:function(t,e){var n,r=this;if(t!==o)if(r._listener[t]=r._listener[t]||[],e)for(;-1!==(n=r._listener[t].indexOf(e));)r._listener[t].splice(n,1);else r._listener[t].length=0;return r},emit:function(t){var e,n,r=this,i=Array.prototype.slice.call(arguments).splice(1);if(t!==o)for(r._listener[t]=r._listener[t]||[],e=0;(n=r._listener[t][e])!==o;e++)n.apply(r,i),n.once===!0&&(r._listener[t].splice(e,1),e--);return r}})},window);